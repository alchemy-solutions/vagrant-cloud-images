---
distros:
#Â https://endoflife.date/almalinux
# https://wiki.almalinux.org/release-notes/
- name: almalinux
  cloud_image_base_url: !unsafe "https://repo.almalinux.org/almalinux/{{ release.name }}/cloud/{{ arch.type }}/images"
  cloud_image_url: !unsafe "{{ cloud_image_base_url }}/AlmaLinux-{{ release.name }}-GenericCloud-{{ release.version }}-{{ cloud_image_build }}.{{ arch.type }}.qcow2"
  cloud_image_checksum: !unsafe "sha256:{{ cloud_image_base_url }}/CHECKSUM"
  disk_format: qcow2
  pup_filter: "'a text{}'"
  awk_filter: "-F- '/GenericCloud-.*[0-9]{8}/{ split($5,ver,\".\"); print ver[1] }'"
  releases:
  - name: "9"
    version: "9.5"
    description: AlmaLinux 9.5 (Teal Serval) Cloud Image
    eos: May 2027
    eol: May 2032
    arch:
    - name: amd64
      type: x86_64
    - name: arm64
      type: aarch64
  - name: "8"
    version: "8.10"
    description: AlmaLinux 8.10 (Cerulean Leopard) Cloud Image
    eos: May 2024
    eol: Mar 2029
    arch:
    - name: amd64
      type: x86_64
    - name: arm64
      type: aarch64

# https://alpinelinux.org/releases/
- name: alpine
  cloud_image_base_url: !unsafe "https://dl-cdn.alpinelinux.org/alpine/{{ release.name }}/releases/cloud"
  cloud_image_url: !unsafe "{{ cloud_image_base_url }}/nocloud_alpine-{{ cloud_image_build }}-{{ arch.type }}-uefi-cloudinit-{{ release.revision }}.qcow2"
  cloud_image_checksum: !unsafe "sha512:{{ cloud_image_url }}.sha512"
  disk_format: qcow2
  pup_filter: "'a attr{href}'"
  awk_filter: "-F- '/^nocloud_alpine-.*-uefi-cloudinit-r0\\.qcow2$/{ print $2 }'"
  # FIXME: how to automatically get latest revision?
  releases:
  - name: "v3.21"
    version: "3.21"
    revision: r0
    description: Alpine Linux v3.21 Cloud Image
    eos: Nov 2026
    arch:
    - name: amd64
      type: x86_64
    - name: arm64
      type: aarch64
  - name: "v3.20"
    version: "3.20"
    revision: r0
    description: Alpine Linux v3.20 Cloud Image
    eos: Apr 2026
    arch:
    - name: amd64
      type: x86_64
    - name: arm64
      type: aarch64
  - name: "v3.19"
    version: "3.19"
    revision: r0
    description: Alpine Linux v3.19 Cloud Image
    eos: Nov 2025
    arch:
    - name: amd64
      type: x86_64
    - name: arm64
      type: aarch64

# https://wiki.debian.org/LTS
# https://cloud.debian.org/images/cloud/
- name: debian
  cloud_image_base_url: !unsafe "https://cloud.debian.org/images/cloud/{{ release.name }}"
  cloud_image_url: !unsafe "{{ cloud_image_base_url }}/{{ cloud_image_build }}/{{ distro.name }}-{{ release.version }}-generic-{{ arch.type }}-{{ cloud_image_build }}.qcow2"
  cloud_image_checksum: !unsafe "sha512:{{ cloud_image_base_url }}/{{ cloud_image_build }}/SHA512SUMS"
  disk_format: qcow2
  pup_filter: "'td.indexcolname text{}'"
  awk_filter: "-F/ '/[0-9]{8}-[0-9]{4}/{ print $1 }'"
  releases:
  - name: bookworm
    version: "12"
    description: Debian 12 (Bookworm) Cloud Image
    eos: June 2026
    eol: June 2028
    arch:
    - name: amd64
      type: amd64
    - name: arm64
      type: arm64
  - name: bullseye
    version: "11"
    description: Debian 11 (Bullseye) Cloud Image
    eos: August 2024
    eol: June 2026
    arch:
    - name: amd64
      type: amd64
    - name: arm64
      type: arm64

# https://fedorapeople.org/groups/schedule
# https://fedoraproject.org/cloud/download
- name: fedora
  cloud_image_base_url: !unsafe "https://download.fedoraproject.org/pub/fedora/linux/releases/{{ release.name }}/Cloud/{{ arch.type }}/images"
  cloud_image_url: !unsafe "{{ cloud_image_base_url }}/Fedora-Cloud-Base-Generic-{{ release.name }}-{{ cloud_image_build }}.{{ arch.type }}.qcow2"
  #cloud_image_checksum: !unsafe "sha256:{{ cloud_image_base_url }}/Fedora-Cloud-{{ release.name }}-{{ cloud_image_build }}-{{ arch.type }}-CHECKSUM"
  disk_format: qcow2
  pup_filter: "'a attr{href}'"
  awk_filter: "-F- '/^Fedora.*CHECKSUM$/{ print $4 }'"
  releases:
  - name: "42"
    version: "42"
    description: Fedora 42 Cloud Image
    eol: May 2026
    arch:
    - name: amd64
      type: x86_64
    - name: arm64
      type: aarch64
  - name: "41"
    version: "41"
    description: Fedora 41 Cloud Image
    eol: Nov 2025
    arch:
    - name: amd64
      type: x86_64
    - name: arm64
      type: aarch64
  - name: "40"
    version: "40"
    description: Fedora 40 Cloud Image
    eol: May 2025
    cloud_image_url: !unsafe "{{ cloud_image_base_url }}/Fedora-Cloud-Base-Generic.{{ arch.type }}-{{ release.name }}-{{ cloud_image_build }}.qcow2"
    arch:
    - name: amd64
      type: x86_64
    - name: arm64
      type: aarch64

# https://wiki.ubuntu.com/Releases
# https://cloud-images.ubuntu.com
- name: ubuntu
  cloud_image_base_url: !unsafe "https://cloud-images.ubuntu.com/{{ release.name }}"
  cloud_image_url: !unsafe "{{ cloud_image_base_url }}/{{ cloud_image_build }}/{{ release.name }}-server-cloudimg-{{ arch.type }}.img"
  cloud_image_checksum: !unsafe "sha256:{{ cloud_image_base_url }}/{{ cloud_image_build }}/SHA256SUMS"
  disk_format: qcow2
  pup_filter: "'a text{}'"
  awk_filter: "-F/ '/[0-9]{8}\\.?[0-9]*/{ print $1 }'"
  releases:
  - name: noble
    version: "24.04"
    description: Ubuntu 24.04 LTS (Noble Numbat) Cloud Image
    eos: June 2029
    eol: April 2036
    arch:
    - name: amd64
      type: amd64
    - name: arm64
      type: arm64
  - name: jammy
    version: "22.04"
    description: Ubuntu 22.04 LTS (Jammy Jellyfish) Cloud Image
    eos: June 2027
    eol: April 2034
    arch:
    - name: amd64
      type: amd64
    - name: arm64
      type: arm64
  - name: focal
    version: "20.04"
    description: Ubuntu 20.04 LTS (Focal Fossa) Cloud Image
    eos: April 2025
    eol: April 2032
    arch:
    - name: amd64
      type: amd64
    - name: arm64
      type: arm64
  - name: bionic
    version: "18.04"
    description: Ubuntu 18.04 LTS (Bionic Beaver) Cloud Image
    eos: June 2023
    eol: April 2030
    arch:
    - name: amd64
      type: amd64
    - name: arm64
      type: arm64
  - name: xenial
    version: "16.04"
    description: Ubuntu 16.04 LTS (Xenial Xerus) Cloud Image
    eos: April 2021
    eol: April 2028
    cloud_image_url: !unsafe "{{ cloud_image_base_url }}/{{ cloud_image_build }}/{{ release.name }}-server-cloudimg-{{ arch.type }}-disk1.img"
    arch:
    - name: amd64
      type: amd64
    - name: arm64
      type: arm64
  - name: trusty
    version: "14.04"
    description: Ubuntu 14.04 LTS (Trusty Tahr) Cloud Image
    eos: April 2019
    eol: April 2026
    cloud_image_url: !unsafe "{{ cloud_image_base_url }}/{{ cloud_image_build }}/{{ release.name }}-server-cloudimg-{{ arch.type }}-disk1.img"
    arch:
    - name: amd64
      type: amd64
    - name: arm64
      type: arm64
